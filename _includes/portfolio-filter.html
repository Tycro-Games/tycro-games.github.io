<script>
document.addEventListener('DOMContentLoaded', function () {
  const filterButtons = document.querySelectorAll('.filter-btn');
  const projectCards = document.querySelectorAll('.project-card-link');

  function applyFilter(filter) {
    const cardsArray = Array.from(projectCards);

    if (filter === 'chronological') {
      cardsArray.sort((a, b) => {
        const dateA = parseInt(a.getAttribute('data-date'));
        const dateB = parseInt(b.getAttribute('data-date'));
        return dateB - dateA;
      });

      cardsArray.forEach((card, index) => {
        card.style.display = '';
        card.style.order = index;
      });
    } else {
      const priorityAttr = `data-priority-${filter}`;

      cardsArray.sort((a, b) => {
        const priorityA = parseInt(a.getAttribute(priorityAttr)) || 999;
        const priorityB = parseInt(b.getAttribute(priorityAttr)) || 999;
        return priorityA - priorityB;
      });

      cardsArray.forEach((card, index) => {
        const priority = parseInt(card.getAttribute(priorityAttr)) || 999;

        if (priority === 999) {
          card.style.display = 'none';
        } else {
          card.style.display = '';
          card.style.order = index;
        }
      });
    }
  }

  applyFilter('engine');

  filterButtons.forEach((button) => {
    button.addEventListener('click', function () {
      filterButtons.forEach((btn) => btn.classList.remove('active'));
      this.classList.add('active');
      applyFilter(this.dataset.filter);
    });
  });
});
</script>
